<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head profile="http://purl.org/NET/erdf/profile">
    <META http-equiv="Content-Type" content="text/html; charset=utf-16">
    <title>
					mca blog
					
									[state transitions: simple and complex]
								</title>
    <link rel="alternate" type="application/x-wiki" title="Edit this blog" href="http://amundsen.com/blog/edit/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for mca blog" href="../feed/index.html">
    <link rel="stylesheet" type="text/css" href="http://amundsen.com/server/conflate/?/xcs/blogging/css/blogging.css,/xcs/blogging/css/blogging-layout.css,/xcs/blogging/css/blogging-iran-election.css">
    <link rel="search" type="application/opensearchdescription+xml" title="MikeAmundsen and friends" href="http://wego-wego.appspot.com/friendfeed/mamund/osd/">
    <link rel="schema.rdfs" href="http://www.w3.org/2000/01/rdf-schema#">
    <link rel="schema.dc" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.foaf" href="http://xmlns.com/foaf/0.1/">
    <link rel="schema.bio" href="http://vocab.org/bio/0.1/">
    <link rel="schema.contact" href="http://www.w3.org/2000/10/swap/pim/contact#">
    <link rel="schema.air" href="http://www.daml.org/2001/10/html/airport-ont#">
    <link rel="schema.wn" href="http://xmlns.com/wordnet/1.6/">
    <link rel="schema.rss" href="http://purl.org/rss/1.0/">
    <link rel="schema.terms" href="http://purl.org/dc/terms/">
    <link rel="schema.rel" href="http://purl.org/vocab/relationship/">
    <link rel="schema.geo" href="http://www.w3.org/2003/01/geo/wgs84_pos#">
    <link rel="schema.aff" href="http://purl.org/vocab/affiliations/0.1/">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <link rel="schema.org" href="http://purl.org/vocab/organizations/0.1/">
    <link rel="schema.psych" href="http://purl.org/vocab/psychometric-profile/">
    <link rel="schema.doap" href="http://usefulinc.com/ns/doap#">
    <style type="text/css">
					form
					{
					font-size:small;
					padding:.3em;
					text-align:center;
					}
					input
					{
					font-size:x-small;
					}
					#twitter_div
					{
					/*
					width:95%
					padding:.2em;
					border:1px solid black;
					*/
					}
					#twitter_div h2
					{
					margin:0;
					padding:0;
					float:right;
					}
					.twitter-title
					{

					}
					#twitter_update_list
					{
					font-family:monospace;
					list-style:none;
					margin:0;
					padding:0;
					float:none;
					clear:both;
					}
					#twitter_update_list li
					{
					border:1px solid silver;
					background-color:#e6e6e6;
					margin:.2em .2em;
					}
					.twitter-link
					{
					display:block;
					float:right;
					margin-right: .7em;
					}
					#twitter_div a
					{
					text-decoration:none;
					}
					#twitter_div a:hover
					{
					text-decoration:underline;
					}
					.empty
					{
					float:none;
					clear:both;
					visibility:hidden;
					margin:0;
					padding:0;
					}
				</style><script type="text/javascript" src="http://amundsen.com/server/conflate/?/xcs/blogging/scripts/blogging.js,/lib/jscap/jcap.js,/lib/jscap/md5.js">//</script></head>
  <body>
    <div id="wrap">
      <div id="header">
        <h1><a href="../index.html" title="home page">mca blog</a></h1>
        <p class="title-desc">life in lowercase</p>
      </div>
      <div id="nav">
        <ul>
          <li><a href="../index.html" title="home page">Home</a></li>
          <li><a href="../categories/index.html" title="blog categories">Categories</a></li>
          <li><a href="../websites/index.html" title="intersting web sites">Web Sites</a></li>
          <li><a href="index.html" title="browse the archives">Archives</a></li>
        </ul>
      </div>
      <div id="main">
        <h2 class="dc-title">state transitions: simple and complex</h2>
        <div class="weblog">
          <div class="wb-header"><span class="foaf-maker" style="display:none;"><a href="http://www.amundsen.com/blog/author/mamund" title="Posted by mamund">mamund</a></span><span class="logdate" style="margin-left:1em;">2011-03-09 @ 08:55</span><span class="permalink"><a href="1095.html" title="perma-link">#</a></span></div>
          <div class="dc-description"><p>
<a href="http://www.flickr.com/photos/auro/227510118/" title="a déjà vu is usually a glitch in the matrix">
	<img src="http://farm1.static.flickr.com/64/227510118_3f73737150_t.jpg" align="right" class="inline" />
</a>
as i work through the final edits on my 
<a href="../../hypermedia/profiles/index.html" title="Application-Level Profile Semantics">ALPS</a>
project, i am reminded of a number of "media-type design" aspects worth discussing.
in this post, i'll concentrate on just one of those items: <b>state transition "types."</b>
</p>
<p>
yeah, this seems kinda boring, but i think it is important. as i explore the ways in which 
medis type definitions (fail to) support expressing 
<a href="../../hypermedia/hfactor.html" title="H-Factors">hypermedia factors</a>
i find i am spending more time understanding the role that hypermedia plays in enabling
<a href="http://en.wikipedia.org/wiki/State_transition_table" title="State transition table">state transitions</a>.
</p>
<p>
it's easy to get bogged down in what state transitions "are", how they "work", and their role in 
hypermedia and the Web in general. i'm going to skip over all that here[grin]. instead, i want to
focus on some of the concrete details of state transitions for hypermedia and why i think identifying
them is critical for building robust distributed applications.
</p>

<h4>a state of mind</h4>
<p>
in general, one of the tasks in designing a media type (or a semantic profile for an existing media type)
is to create ways to express state transitions within the responses. so much work today fails to account
for this important task. instead most Web implementations simply serialize internal 
<a href="http://msdn.microsoft.com/en-us/library/ms973893.aspx" title="Object Serialization in the .NET Framework">objects</a> 
in a common format 
(<a href="http://www.w3.org/TR/REC-xml/" title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">XML</a>, 
<a href="http://tools.ietf.org/html/rfc4627" title="The application/json Media Type for JavaScript Object Notation (JSON)">JSON</a>, etc.)
and the result is an "empty" response. empty in the sense that no hypermedia information is included
within the response; only raw data. that means it is up to client code to determine the next transition to "express" for the 
human (as UI elements). this leads to a set of responses that are 'captive' of the client to which they are sent; it leads
to 'dumb' data for 'smart' clients.
</p>
<p>
however, in order to implement Web solutions that do not rely on smart clients (usually in the form of custom Javascript, etc.) 
in order to "know" which step to take next, standard state transition information (in the form of hypermedia elements) must be 
designed into the media type used in responses. for example, <a href="http://www.w3.org/TR/html401/" title="HTML 4.01 Specification">HTML</a> 
has a very simple set of state transition controls that every Web developer knows well: the
<a href="http://www.w3.org/TR/html401/struct/links.html#edef-A" title="The A element">A</a> element and the 
<a href="http://www.w3.org/TR/html401/interact/forms.html#edef-FORM" title="The FORM element">FORM</a> element.
and these two elements represent the two types of state transitions with which all media type designs must contend:
simple and complex. the very topic i want to discuss (how convenient!)
</p>
<blockquote>
	it is worth noting that the mere appearance of A and FORM elements in a response does not ensure that the
	representation is using them for state-transition purposes. that's another topic which i will 
	avoid here. for now, i will address the ways in which media type provide state transition elements;
	not how they are actually <i>used</i> in representations.
</blockquote>

<h4>simple</h4>
<p>
simple state transitions are those that require no additional inputs from the user agent; they can simply be 
"activated" in order to change the current application state.
</p>
<blockquote>
	by "current application state" i mean the condition of the application currently experienced by the user.
	IOW, application state (in the way i am using the phrase) is the temporal state as viewed from the "client"
	or user agent.
</blockquote>
<p>
the HTML A (anchor) element supports simple state transitions. the transition could be
navigating to a new "page" (<code>&lt;a href="/home.html"&gt;Home&lt;/a&gt;</code>) or even executing a pre-defined
filtering operation on the server (<code>&lt;a href="/clients?balance=unpaid"&gt;Clients w/ outstanding balances&lt;/a&gt;</code>).
</p>
<p>
since simple state transitions carry no additional inputs, this often this means
that the transition is a "read-only" operation. but this need not always be the case. 
for example, HTTP DELETE requires no additional inputs and HTTP POST is valid with an empty entity body. 
however, in the case of the HTML media type, these examples of simple transitions are not supported w/o resorting
to javascripted responses (i.e. <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_7">Code-On-Demand</a>).
other media types have solved this problem, but i'm getting ahead a bit.
</p>
<p>
so, there will be times when simple state transitions must be represented in server responses. if the response is made
using HTML, this can be done using the A (anchor) tag. if, however, the response is made using some other base format
(e.g. XML, JSON, etc.) then some other element must be designated to handle the task of representing 
simple state transitions. 
</p>

<h4>complex</h4>
<p>
complex state transitions are those that require additional inputs from the user agent. using HTML (again), the
FORM element is used to represent complex state transitions; it indicates one or more additional inputs that [may|should|must]
be supplied when activating the transition.
</p>
<p>
for example a "search box" on an HTML page is a complex state transition; usually requiring a single additional input: the search value. 
HTML FORMs that prompt humans to enter text for posting on a micro-blog site (twitter, identi.ca, etc.) also examples of complex
state transitions. 
</p>
<blockquote>
	note that the examples cited here represent both "read" opertions (seach) and "write" operations (posting to a 
	micro-blog site). 
</blockquote>	
<p>
again, when designing a media type (or a hypermedia profile for an existing media type) the concept of complex state transitions
needs to be addressed. it's possible, of course. that some use cases require no complex state transitions (i.e. a web spider that just
pulls down pages and indexes them). but any site that expects user agents to supply inputs will need to document the details of
complex state transitions.
</p>
<p>
up to this point, as i describe these two types of transitions, i've used HTML for all my examples. but HTML is not the only 
hypermedia type in use today. how, you might ask, do other media type handle state transition details?
</p>
<h4>Atom and state transitions</h4>
<p>
the 
<a href="http://tools.ietf.org/html/rfc4287" title="The Atom Syndication Format">Atom</a> format uses 
<code>&lt;link ... /&gt;</code> elements for state transitions. however, Atom has no native equivalent of HTML's FORM
element.  in fact, most transitions in Atom are of the "simple" type. the documentation for Atom identifies 
whether the <code>&lt;link ... /&gt;</code> element is "simple" or "complex" by delineating the meaning of the link's 
<code>@rel</code> attribute.
</p>
<p>
for example, <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.2" title="The 'rel' Attribute">RFC4278</a> 
documents the following rel values as indicating a simple state transition:
<code>alternate</code>,
<code>enclosure</code>,
<code>related</code>, 
<code>self</code>, and 
<code>via</code>.
In addition, <a href="http://tools.ietf.org/html/rfc5023#section-11" title="Atom Format Link Relation Extensions">RFC5023</a>
documents a number additional link relations; some of them indicate complex state transitions:
<code>edit</code>, and
<code>edit-media</code>. There are also instructions on how to use HTTP POST against the
<a href="http://tools.ietf.org/html/rfc5023#section-9.2" title="Creating Resources with POST">collection URI</a> 
along w/ a few more simple transition rels for 
<a href="http://tools.ietf.org/html/rfc5023#section-10.1" title="">paging</a> long lists.
</p>
<p>
the exact details for how to "craft" complex transistions for the <code>edit</code> @rel and the collection URI
are not spelled out in the document. however, there are rules on what constitues a valid entry item and most Atom
user agents simply hard-code these rules into the client application and supply the resulting confirming XML block when activating
these complex state transitions. this is quite different from the HTML media type which provides markup for 
representing any expected input elements for complex transition directly in the response. 
</p>
<h4>troublesome transitions...</h4>
<p>
you can see that HTML and Atom approached the challenge of representing state transitions in responses in different ways. HTML
identifies different elements for each type of state transition. Atom uses the same element, but expects clients to inspect
the @rel attribute to know whether the element represents a simple or complex state transition. HTML uses elements within the
response to provide detailed instructions on how to assemble a valid complex state transition. Atom relies on printed documentation
to describe valid complex transitions.
</p>
<p>
this leads to a key questions you should ask yourself. for example, when representing responses using media types that 
contain no native state transition controls (XML, JSON, etc.), how will you identify state simple and complex transitions? 
how will you communicate to user agents that one or more state transitions are possible (e.g. search, pre-defined filters, 
creating new entities on the server, editing or deleting existing entities, etc.)?
</p>
<p>
as i mentioned at the start of this (now too long) post, i see too many cases where those responsible for designing response
representations do not take the time to deal w/ these important issues. instead, the common practice is to 
write some prose in a document and expect user agents to just "know" not only <i>what</i> is possible, but also 
<i>when</i> it is valid to execute one of several pre-defined state transitions (both simple and complex). this
can work if you limit your client-server interactions to mere 
<a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete" title="create, update, read, delete">CRUD</a>
interactions. but many implementations need more than a CRUD-y interface.
</p>
<p>
ignoring state transition representation is a mistake that leads to "empty" responses and brittle clients that are 
needlessly coupled to particular server implementations. any time any server decides to "change the rules" about the 
number of possible state transtions, the instances when any state transition is valid and/or the input elements that 
make up a valid complex state transtion, clients run the risk of making mistakes, confusing the results of simple 
transitions, crafting invalid complex transtions, etc. in some cases this means the client is "broken" and must be 
re-coded and re-deployed. in other cases, it means there is a possibility that exsiting clients may actually corrupt 
data on servers by executing state transitions improperly or "out of order."
</p>
<p>
these issues can, for the most part, be avoided w/ proper hypermedia designs <i>and</i> proper user agent application 
coding. the common Web browser has been dealing with these issues for years. there is no magic bullet and the browser
does not have a monopoly on intelligent hypermedia agent implemention. everyone writing client applications for 
the Web should be doing essentially the same thing.
</p>
<h4>...and a challenge</h4>
<p>
so my challenge to all you Web developers out there is to "step up your game."
</p>
<p>those responsible for writing server implementations need to start
crafting hypermedia responses that include clearly identified state transtions. they should be consistent on how they 
describe and represent complex transitions so that clients can be coded accordingly. 
</p>
<p>
and those who are writing clients should demand responses that contain well-defined state transitions. ones that user
agents can recognize and understand. in cases where complex transitions are needed, clients should be able to identify
them, locate and input elements, and have clear direction on how to assemble and send valid entities for these transitions.
</p>
<p>
and, finally, anyone contemplating designing new media types should be including state transition representation into
their designs. stop writing message formats devoid of hypermedia information and expecting servers and clients to work
out all the transitions ahead of time and encasing those transitions in hard-code.
</p>
<p>
sure, this takes some work but the solutions are out there. they may not be "simple" solutions, but when you get down it
there are viable alternatives to "empty" responses that are not really "complex."
</p>
<p>see what i did there [grin]?</p>
</div>
          <p class="category"><a href="index.html%3Fcategory=20.html" title="more from Hypermedia...">Hypermedia</a></p>
          <hr><a id="comments"></a><script>
						var idcomments_acct = 'b941b488f39712a0d6409992a0d7fc47';
						var idcomments_post_id;
						var idcomments_post_url;
					</script><span id="IDCommentsPostTitle" style="display:none"></span><script type="text/javascript" src="http://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></div>
        <div> </div>
      </div>
      <div id="sidebar">
        <h4>categories</h4>
        <ul>
          <li><a href="index.html%3Fcategory=33.html">Systems</a></li>
          <li><a href="index.html%3Fcategory=32.html">CA</a></li>
          <li><a href="index.html%3Fcategory=31.html">IoT</a></li>
          <li><a href="index.html%3Fcategory=30.html">ALPS</a></li>
          <li><a href="index.html%3Fcategory=29.html">API</a></li>
          <li>[<a href="../categories/index.html%3Fall.html" title="view all categories">all</a>]</li>
        </ul>
        <h4>websites</h4>
        <ul>
          <li><a href="../websites/32.html">Untangled</a></li>
          <li><a href="../websites/31.html">Anne’s Weblog</a></li>
          <li><a href="../websites/30.html">exyus</a></li>
          <li><a href="../websites/29.html">Random Stuff</a></li>
          <li><a href="../websites/28.html">JScript Blog</a></li>
          <li>[<a href="../websites/index.html%3Fall.html" title="view all websites">all</a>]</li>
        </ul>
        <h4>archives</h4>
        <ul>
          <li><a href="index.html%3Ftoday.html" title="today's posts">today</a></li>
          <li><a href="index.html%3Fyesterday.html" title="yesterday's posts">yesterday</a></li>
          <li><a href="index.html%3Fthisweek.html" title="this weeks's posts">this week</a></li>
          <li><a href="index.html%3Flastweek.html" title="last week's posts">last week</a></li>
          <li><a href="index.html%3Fthismonth.html" title="this month's posts">this month</a></li>
          <li><a href="index.html%3Flastmonth.html" title="last month's posts">last month</a></li>
          <li>
								[<a href="index.html" title="browse the archives">browse</a>]
							</li>
        </ul>
        <div> </div>
        <div><xscript type="text/javascript" src="http://plancast.com/goodies/widgets/sidebar/1/15731">// plancast</xscript></div>
        <div id="twitter_div">
          <h4>my tweets</h4>
          <ul id="twitter_update_list"></ul>
          <div class="twitter-link"><a href="http://twitter.com/mamund" title="follow me on Twitter">
									follow me
								</a></div>
          <hr class="empty">
        </div>
      </div>
      <div id="ads" style="text-align:center;"><script type="text/javascript">
							google_ad_client = "pub-2944238157647009";
							google_ad_width = 728;
							google_ad_height = 90;
							google_ad_format = "728x90_as";
							google_ad_type = "text";
							//2007-08-10: amundsen.com
							google_ad_channel = "2960096544";
							google_color_border = "000000";
							google_color_bg = "F0F0F0";
							google_color_link = "000000";
							google_color_text = "000000";
							google_color_url = "000000";
						</script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>
      <div id="footer">
        <p>Copyright © 2007-2010 amundsen.com, inc. All rights reserved.</p>
      </div>
    </div><script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script><script type="text/javascript" src="http://twitter.com/statuses/user_timeline/mamund.json?callback=twitterCallback2&amp;count=5"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
					_uacct = "UA-2399548-1";
					urchinTracker();
				</script></body>
</html>