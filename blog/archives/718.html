<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head profile="http://purl.org/NET/erdf/profile">
    <META http-equiv="Content-Type" content="text/html; charset=utf-16">
    <title>
					mca blog
					
									[exyus pipeline details]
								</title>
    <link rel="alternate" type="application/x-wiki" title="Edit this blog" href="http://amundsen.com/blog/edit/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for mca blog" href="../feed/index.html">
    <link rel="stylesheet" type="text/css" href="http://amundsen.com/server/conflate/?/xcs/blogging/css/blogging.css,/xcs/blogging/css/blogging-layout.css,/xcs/blogging/css/blogging-iran-election.css">
    <link rel="search" type="application/opensearchdescription+xml" title="MikeAmundsen and friends" href="http://wego-wego.appspot.com/friendfeed/mamund/osd/">
    <link rel="schema.rdfs" href="http://www.w3.org/2000/01/rdf-schema#">
    <link rel="schema.dc" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.foaf" href="http://xmlns.com/foaf/0.1/">
    <link rel="schema.bio" href="http://vocab.org/bio/0.1/">
    <link rel="schema.contact" href="http://www.w3.org/2000/10/swap/pim/contact#">
    <link rel="schema.air" href="http://www.daml.org/2001/10/html/airport-ont#">
    <link rel="schema.wn" href="http://xmlns.com/wordnet/1.6/">
    <link rel="schema.rss" href="http://purl.org/rss/1.0/">
    <link rel="schema.terms" href="http://purl.org/dc/terms/">
    <link rel="schema.rel" href="http://purl.org/vocab/relationship/">
    <link rel="schema.geo" href="http://www.w3.org/2003/01/geo/wgs84_pos#">
    <link rel="schema.aff" href="http://purl.org/vocab/affiliations/0.1/">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <link rel="schema.org" href="http://purl.org/vocab/organizations/0.1/">
    <link rel="schema.psych" href="http://purl.org/vocab/psychometric-profile/">
    <link rel="schema.doap" href="http://usefulinc.com/ns/doap#">
    <style type="text/css">
					form
					{
					font-size:small;
					padding:.3em;
					text-align:center;
					}
					input
					{
					font-size:x-small;
					}
					#twitter_div
					{
					/*
					width:95%
					padding:.2em;
					border:1px solid black;
					*/
					}
					#twitter_div h2
					{
					margin:0;
					padding:0;
					float:right;
					}
					.twitter-title
					{

					}
					#twitter_update_list
					{
					font-family:monospace;
					list-style:none;
					margin:0;
					padding:0;
					float:none;
					clear:both;
					}
					#twitter_update_list li
					{
					border:1px solid silver;
					background-color:#e6e6e6;
					margin:.2em .2em;
					}
					.twitter-link
					{
					display:block;
					float:right;
					margin-right: .7em;
					}
					#twitter_div a
					{
					text-decoration:none;
					}
					#twitter_div a:hover
					{
					text-decoration:underline;
					}
					.empty
					{
					float:none;
					clear:both;
					visibility:hidden;
					margin:0;
					padding:0;
					}
				</style><script type="text/javascript" src="http://amundsen.com/server/conflate/?/xcs/blogging/scripts/blogging.js,/lib/jscap/jcap.js,/lib/jscap/md5.js">//</script></head>
  <body>
    <div id="wrap">
      <div id="header">
        <h1><a href="../index.html" title="home page">mca blog</a></h1>
        <p class="title-desc">life in lowercase</p>
      </div>
      <div id="nav">
        <ul>
          <li><a href="../index.html" title="home page">Home</a></li>
          <li><a href="../categories/index.html" title="blog categories">Categories</a></li>
          <li><a href="../websites/index.html" title="intersting web sites">Web Sites</a></li>
          <li><a href="index.html" title="browse the archives">Archives</a></li>
        </ul>
      </div>
      <div id="main">
        <h2 class="dc-title">exyus pipeline details</h2>
        <div class="weblog">
          <div class="wb-header"><span class="foaf-maker" style="display:none;"><a href="http://www.amundsen.com/blog/author/mamund" title="Posted by mamund">mamund</a></span><span class="logdate" style="margin-left:1em;">2008-03-31 @ 14:25</span><span class="permalink"><a href="718.html" title="perma-link">#</a></span></div>
          <div class="dc-description"><p>
  <a href="http://farm1.static.flickr.com/61/186542214_7f84aded42_b.jpg" title="pipes">
    <img src="http://farm1.static.flickr.com/61/186542214_7f84aded42_t.jpg" align="right" class="inline" />
  </a>
  the <a href="http://exyus.com" title="exyus">exyus</a> web engine works on an XML transformation pipeline model.
  although it does not implement the <a href="http://www.w3.org/TR/xml-pipeline/" title="XML Pipeline Definition Language Version 1.0">W3C XML Pipeline</a>
  standard, it works in a similar way. now that the engine is starting reach a steady-state, i figured is was worth
  the time to outline the details of the pipeline as it is currently implemented.
</p>
<h4>the big picture</h4>
<p>
  in exyus, there are several 'transformation/validation points' that can be implemented. most of them are optional. they are (in order):
  <dl>
    <dt>argument validation</dt>
    <dd>
      all incoming arguments are captured as an XML document and can be validated using XSD.
      this is usually done in order to make sure all the required arguments were supplied by the client.
      these arguments are also available as a list of XSL parameters for the life for the request (see below)
    </dd>
    <dt>request body validation</dt>
    <dd>
      the body sent with the request is captured as an XML document and can be validated using XSD.
      this is usually done to make sure any incoming request has the proper input fields, that the fields
      contain the proper data types, ranges, etc.
    </dd>
    <dt>request body transformation</dt>
    <dd>
      the body sent with the request can be transformed using XSL.
      this is usually done in order to convert the incoming data into a format suitable for executing
      the request. for example, the incoming request can be transformed into a valid T-SQL call or it
      can be transformed into the final format needed to save the information to disk. the list of arguments 
      is also available for this transformation as a set of XSL parameters. 
    </dd>
    <dt>response body transformation</dt>
    <dd>
      the result of the cxommand execution can be transformed using XSL.
      this is usually done in order to convert the response of the back-end storage system (T-SQL, file system, etc.)
      into a valid representation for the client. the list of arguments is also available for this transformation 
      as a set of XSL parameters. any additional state information that results from the execution of the command
      (new document id, date-time stamp, location on disk, etc.) is also available as an XSL argument.
    </dd>
  </dl>
</p>
<p>
  ok, so much for the general pattern. below is a step-by-step set of transformation and validation points
  for the four key HTTP Methods supported by the exyus web engine. note that in almost all cases, these
  validation and transformation steps are optional. 
</p>  
<h4>workflow for handling HTTP DELETE</h4>
<ol>
<li>collect URL + arguments</li>
<li>convert into -args- document</li>
<li>validate -args- document</li>
<li>transform -args- into valid delete document (t-sql, physical file)</li>
<li>execute delete</li>
<li>return 204 (no content)</li>
</ol>

<h4>workflow for handling HTTP GET</h4>
<ol>
<li>collect URL + arguments</li>
<li>convert into -args- document</li>
<li>validate -args- document</li>
<li>transform -args- into valid read document (t-sql, physical file)</li>
<li>execute read</li>
<li>transform results into valid response representation</li>
<li>return 200 + representation</li>
</ol>

<h4>workflow for handling HTTP POST</h4>
<ol>
<li>collect URL + arguments</li>
<li>convert into -args- document</li>
<li>validate -args- document</li>
<li>collect body entity</li>
<li>convert into -body- document</li>
<li>validate -body- document</li>
<li>transform -body- into valid save document (t-sql, physical file)</li>
<li>execute save</li>
<li>transform results into valid response representation</li>
<li>if redirect-on-create, then send 302 (found) + new URL</li>
<li>else return 200 + representation</li>
</ol>

<h4>workflow for handling HTTP PUT</h4>
<ol>
<li>collect URL + arguments</li>
<li>convert into -args- document</li>
<li>validate -args- document</li>
<li>collect body entity </li>
<li>convert into -body- document</li>
<li>validate -body- document</li>
<li>collect headers (if-match, if-unmodified-since, content-type)</li>
<li>compose HEAD call (w/ headers) to existing URL</li>
<li>collect resulting headers (etag, last-modified)</li>
<li>evaluate results
  <ol>
  <li>HEAD = 200 OK, it's ok to update</li>
  <li>HEAD = 304 not-modified, it's ok to update</li>
  <li>HEAD = 404 not found, not an update, check if it's OK to create</li>
  </ol>
</li>
<li>if not-ok-to-save, send 412 (pre-condition failed) and exit</li>
<li>else transform -body- into valid save document (t-sql, physical file)</li>
<li>execute save</li>
<li>transform results into valid response representation</li>
<li>return 200 + representation</li>
</ol></div>
          <p class="category"><a href="index.html%3Fcategory=5.html" title="more from code...">code</a></p>
          <hr><a id="comments"></a><script>
						var idcomments_acct = 'b941b488f39712a0d6409992a0d7fc47';
						var idcomments_post_id;
						var idcomments_post_url;
					</script><span id="IDCommentsPostTitle" style="display:none"></span><script type="text/javascript" src="http://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></div>
        <div> </div>
      </div>
      <div id="sidebar">
        <h4>categories</h4>
        <ul>
          <li><a href="index.html%3Fcategory=33.html">Systems</a></li>
          <li><a href="index.html%3Fcategory=32.html">CA</a></li>
          <li><a href="index.html%3Fcategory=31.html">IoT</a></li>
          <li><a href="index.html%3Fcategory=30.html">ALPS</a></li>
          <li><a href="index.html%3Fcategory=29.html">API</a></li>
          <li>[<a href="../categories/index.html%3Fall.html" title="view all categories">all</a>]</li>
        </ul>
        <h4>websites</h4>
        <ul>
          <li><a href="../websites/32.html">Untangled</a></li>
          <li><a href="../websites/31.html">Anne’s Weblog</a></li>
          <li><a href="../websites/30.html">exyus</a></li>
          <li><a href="../websites/29.html">Random Stuff</a></li>
          <li><a href="../websites/28.html">JScript Blog</a></li>
          <li>[<a href="../websites/index.html%3Fall.html" title="view all websites">all</a>]</li>
        </ul>
        <h4>archives</h4>
        <ul>
          <li><a href="index.html%3Ftoday.html" title="today's posts">today</a></li>
          <li><a href="index.html%3Fyesterday.html" title="yesterday's posts">yesterday</a></li>
          <li><a href="index.html%3Fthisweek.html" title="this weeks's posts">this week</a></li>
          <li><a href="index.html%3Flastweek.html" title="last week's posts">last week</a></li>
          <li><a href="index.html%3Fthismonth.html" title="this month's posts">this month</a></li>
          <li><a href="index.html%3Flastmonth.html" title="last month's posts">last month</a></li>
          <li>
								[<a href="index.html" title="browse the archives">browse</a>]
							</li>
        </ul>
        <div> </div>
        <div><xscript type="text/javascript" src="http://plancast.com/goodies/widgets/sidebar/1/15731">// plancast</xscript></div>
        <div id="twitter_div">
          <h4>my tweets</h4>
          <ul id="twitter_update_list"></ul>
          <div class="twitter-link"><a href="http://twitter.com/mamund" title="follow me on Twitter">
									follow me
								</a></div>
          <hr class="empty">
        </div>
      </div>
      <div id="ads" style="text-align:center;"><script type="text/javascript">
							google_ad_client = "pub-2944238157647009";
							google_ad_width = 728;
							google_ad_height = 90;
							google_ad_format = "728x90_as";
							google_ad_type = "text";
							//2007-08-10: amundsen.com
							google_ad_channel = "2960096544";
							google_color_border = "000000";
							google_color_bg = "F0F0F0";
							google_color_link = "000000";
							google_color_text = "000000";
							google_color_url = "000000";
						</script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>
      <div id="footer">
        <p>Copyright © 2007-2010 amundsen.com, inc. All rights reserved.</p>
      </div>
    </div><script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script><script type="text/javascript" src="http://twitter.com/statuses/user_timeline/mamund.json?callback=twitterCallback2&amp;count=5"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
					_uacct = "UA-2399548-1";
					urchinTracker();
				</script></body>
</html>