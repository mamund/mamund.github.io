<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head profile="http://purl.org/NET/erdf/profile">
    <META http-equiv="Content-Type" content="text/html; charset=utf-16">
    <title>
					mca blog
					
									[dftw - decoupled for the win]
								</title>
    <link rel="alternate" type="application/x-wiki" title="Edit this blog" href="http://amundsen.com/blog/edit/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for mca blog" href="../feed/index.html">
    <link rel="stylesheet" type="text/css" href="http://amundsen.com/server/conflate/?/xcs/blogging/css/blogging.css,/xcs/blogging/css/blogging-layout.css,/xcs/blogging/css/blogging-iran-election.css">
    <link rel="search" type="application/opensearchdescription+xml" title="MikeAmundsen and friends" href="http://wego-wego.appspot.com/friendfeed/mamund/osd/">
    <link rel="schema.rdfs" href="http://www.w3.org/2000/01/rdf-schema#">
    <link rel="schema.dc" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.foaf" href="http://xmlns.com/foaf/0.1/">
    <link rel="schema.bio" href="http://vocab.org/bio/0.1/">
    <link rel="schema.contact" href="http://www.w3.org/2000/10/swap/pim/contact#">
    <link rel="schema.air" href="http://www.daml.org/2001/10/html/airport-ont#">
    <link rel="schema.wn" href="http://xmlns.com/wordnet/1.6/">
    <link rel="schema.rss" href="http://purl.org/rss/1.0/">
    <link rel="schema.terms" href="http://purl.org/dc/terms/">
    <link rel="schema.rel" href="http://purl.org/vocab/relationship/">
    <link rel="schema.geo" href="http://www.w3.org/2003/01/geo/wgs84_pos#">
    <link rel="schema.aff" href="http://purl.org/vocab/affiliations/0.1/">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <link rel="schema.org" href="http://purl.org/vocab/organizations/0.1/">
    <link rel="schema.psych" href="http://purl.org/vocab/psychometric-profile/">
    <link rel="schema.doap" href="http://usefulinc.com/ns/doap#">
    <style type="text/css">
					form
					{
					font-size:small;
					padding:.3em;
					text-align:center;
					}
					input
					{
					font-size:x-small;
					}
					#twitter_div
					{
					/*
					width:95%
					padding:.2em;
					border:1px solid black;
					*/
					}
					#twitter_div h2
					{
					margin:0;
					padding:0;
					float:right;
					}
					.twitter-title
					{

					}
					#twitter_update_list
					{
					font-family:monospace;
					list-style:none;
					margin:0;
					padding:0;
					float:none;
					clear:both;
					}
					#twitter_update_list li
					{
					border:1px solid silver;
					background-color:#e6e6e6;
					margin:.2em .2em;
					}
					.twitter-link
					{
					display:block;
					float:right;
					margin-right: .7em;
					}
					#twitter_div a
					{
					text-decoration:none;
					}
					#twitter_div a:hover
					{
					text-decoration:underline;
					}
					.empty
					{
					float:none;
					clear:both;
					visibility:hidden;
					margin:0;
					padding:0;
					}
				</style><script type="text/javascript" src="http://amundsen.com/server/conflate/?/xcs/blogging/scripts/blogging.js,/lib/jscap/jcap.js,/lib/jscap/md5.js">//</script></head>
  <body>
    <div id="wrap">
      <div id="header">
        <h1><a href="../index.html" title="home page">mca blog</a></h1>
        <p class="title-desc">life in lowercase</p>
      </div>
      <div id="nav">
        <ul>
          <li><a href="../index.html" title="home page">Home</a></li>
          <li><a href="../categories/index.html" title="blog categories">Categories</a></li>
          <li><a href="../websites/index.html" title="intersting web sites">Web Sites</a></li>
          <li><a href="index.html" title="browse the archives">Archives</a></li>
        </ul>
      </div>
      <div id="main">
        <h2 class="dc-title">dftw - decoupled for the win</h2>
        <div class="weblog">
          <div class="wb-header"><span class="foaf-maker" style="display:none;"><a href="http://www.amundsen.com/blog/author/mamund" title="Posted by mamund">mamund</a></span><span class="logdate" style="margin-left:1em;">2015-10-11 @ 23:51</span><span class="permalink"><a href="1162.html" title="perma-link">#</a></span></div>
          <div class="dc-description"><p>
<a title="By Daniel Schwen (Own work) [CC BY-SA 4.0 (http://creativecommons.org/licenses/by-sa/4.0)], via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File%3ATrain_coupling.jpg">
<img width="150" alt="Train coupling" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Train_coupling.jpg/307px-Train_coupling.jpg" align="right" class="inline"/>
</a>
it doesn't matter if your service is <a href="http://martinfowler.com/articles/microservices.html">"micro"</a> or <a href="http://martinfowler.com/bliki/ServiceOrientedAmbiguity.html">"oriented"</a>, if it's <a href="https://en.wikipedia.org/wiki/Coupling_(computer_programming)">tightly coupled</a> -- especially if your service is on the Web -- you're going to be stuck nursing your service (and all it's consumers) through <a href="https://en.wikipedia.org/wiki/Software_versioning">lots of pain</a> every time each little change happens (<a href="https://en.wikipedia.org/wiki/Uniform_Resource_Locator">addresses</a>, <a href="https://en.wikipedia.org/wiki/Functional_specification">operations</a>, <a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)">arguments</a>, <a href="https://en.wikipedia.org/wiki/Workflow">process-flow</a>). and that's just <a title="By IDS.photos from Tiverton, UK [CC BY-SA 2.0 (http://creativecommons.org/licenses/by-sa/2.0)], via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File%3ACactus_close-up%2C_but_dont_get_too_close%2C_ouch!_(3225490111).jpg">needless pain</a>. needless for you and for anyone attempting to consume it.
</p>
<h4>tight coupling is trouble</h4>
<p>
tight coupling to any external component or service -- what i call a <i>fatal dependency</i> -- is big trouble. you don't want it. run away. how do you know if you have a fatal dependency? if some service or component you use changes and your code breaks -- that's <b>fatal</b>. it doesn't matter what code framework, software pattern, or architectural style you are using -- breakage is fatal -- stop it.
</p>

<h4>the circuit</h4>
<p>
you can stave off fatalities by wrapping calls to dependents in what <a href="https://twitter.com/mtnygard">Nygaard</a> calls in his book <a href="https://pragprog.com/book/mnee/release-it">Release It!</a> a <a href="http://martinfowler.com/bliki/CircuitBreaker.html">Circuit Breaker</a> but that requires you <i>also</i> have either 1) an alternate service provider (or set of them) or, 2) you write your code such that the unavailable dependency doesn't mean your code is essentially unusable (<i>"Sorry, our bank is unable to perform deposits today."</i>). and the Circuit Breaker pattern is not meant for use when services introduce <b>breaking changes</b> anyway -- it's for cases when the dependent service is <i>temporarily</i> unavailable.
</p>

<h4>a promise</h4>
<p>
you're much better off using services that make a promise to their consumers that any changes to that service will be non-breaking. IOW, changes to the interface will be only <i>additive</i>. no existing operations, arguments or process-flows will be taken away. this is not really hard to do -- except that existing tooling (code editors, build-tools, and testing platforms) make it really <i>easy</i> break that promise!
</p>
<blockquote>
there are lots of refactoring tools that make it hard to break existing <i>code</i>, but not many focus on making it hard to break existing public <i>interfaces</i>. and it's rare to see testing tools that go 'red' when a public interface changes even though they are great at catching changes in private function signatures. bummer.
</blockquote>

<p>so you want to use services that keep the "no breaking changes" pledge, right? that means you also want to deploy services that make that pledge, too.
</p>

<h4>honoring the pledge</h4>
<p>
but how do you honor this "no breaking changes" pledge and still update your service with new features and bug fixes? it turns out that isn't very difficult -- it just takes some discipline.
</p>
<p>here's a quick checklist for implementing the pledge:</p>
<dl>
  <dt>promise operations, not addresses</dt>
  <dd>
    service providers SHOULD promise to support a named operation (<code>shoppingCartCheckOut</code>, <code>computeTax</code>, <code>findCustomer</code>) instead of promising exact addresses for those operations (<code>http://myservice.example.org/findCustomer</code>). on the Web you can do that using properties like <code>rel</code> or <code>name</code> or <code>id</code> that have predetermined values that are well-documented. when this happens, clients can "memorize" the <i>name</i> instead of the address.
  </dd>
  <dt>promise message formats, not object serializations</dt>
  <dd>
    object models are bound to change -- and change often for new services. trying to get all your service consumers to learn and track all your object model changes is just plain wrong. and, even if you <i>wanted</i> all consumers to keep up with your team's model changes, that means your feature velocity is tied to the slowest consumer in your ecosystem - blech! instead, promise generic message formats that don't require an understanding of object models. formats like <a href="http://www.w3.org/TR/voicexml20/">VoiceXML</a> and <a href="../../media-types/collection/index.html">Collection+JSON</a> are specifically designed to support this kind of promise. <a href="http://www.w3.org/html/">HTML</a>, <a href="https://tools.ietf.org/html/rfc4287">Atom</a>, and other formats can be used in a way that maintains this promise, too. clients can now "bind" for the messgae format, not the object model -- changes to the model on the service don't leak out to the consumer. when this happens, adding new data elements in the response will not break clients.
  </dd>
  <dt>promise transitions, not functions</dt>
  <dd>
    service providers SHOULD treat all public interface operations as message-based <i>transitions</i>, not fixed functions with arguments. that means you need to give up on the classic <a href="https://en.wikipedia.org/wiki/Remote_procedure_call">RPC</a>-style implementation patterns so many tools lead you into. instead, publish operations that <i>pass messages</i> (using registered formats like <code>application/x-form-urlencoded</code>) that contain the arguments currently needed for that operation. when this happens, clients only need to "memorize" the argument names (all pre-defined in well-written documentation) and then pay attention to the transition details that are supplied in service responses. some "old skool" peeps call these transition details FORMs, but it doesn't matter what you call them as long as you promise to <i>use</i> them.
  </dd>
  <dt>promise dynamic process-flows, not static execution chains</dt>
  <dd>
    serivces SHOULD NOT promised fixed-path workflows ("I promise you will always execute steps X then A, then Q, then F, then be done."). this just leads consumers to hard code that nonsense into their app and break when you want to modify the workflow due to new business processes within the service. instead, services SHOULD promise a operation identifiers (see above) along with a limited set of process-flow identifiers (<code>start</code>, <code>next</code>, <code>previous</code>, <code>restart</code>, <code>cancel</code>, <code>done</code>) that work with <i>any</i> process-flow that you need to support. when this happens clients only need to "memorize" the generic process-flow keywords and can be coded to act accordingly. 
  </dd>
</dl>

<h4>not complicated, just hard work</h4>
<p>
you'll note that all four of the above promises are not <a href="https://www.google.com/search?q=complicated+definition">complicated</a> -- and certainly not <a href="https://www.google.com/search?q=complex+definition"><i>complex</i></a>. but they do represent some <a title="By J. Howard Miller, artist employed by Westinghouse, poster used by the War Production Co-ordinating Committee [Public domain], via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File%3AWe_Can_Do_It!.jpg">hard work</a>. it's a bummer that tooling doesn't make these kinds of promises easy. in fact, most tools do the opposite. they make address-based, object-serialization with fixed argument functions and static execution chain easy -- in some tools these are the defaults and you just need to press "build and deploy" to get it all working. BAM!
</p>
<p>
so, yeah. this job is not so easy. that's why you need to be diligent and disciplined for this kind of work.
</p>

<h4>eliminating dependencies</h4>
<p>
and -- back to the original point here -- decoupling addresses, operations, arguments, and process-flow means you eliminate lots of fatal dependencies in your system. it is now safer to make changes in components without so much worry about unexpected side-effects. and this will be a <b>big deal for all you microservice fans out there</b> because deploying dozens of independent services explodes your <i>interface-to-operation ratio</i> and it's just brutal to do that with tightly-coupled interfaces that <b>fail to support theses promises</b> inherent in a loosely-coupled implementation.
</p>

<h4>for the win</h4>
<p>
so, do not fear. whether you are a "microservice" lover or a "service-oriented" fan, you'll do fine as long as your make and keep these four promises. and, if you're a consumer of services, you now have some clear measures on whether the serivce you are about to "bind" to will result in fatalities in your system.
</p></div>
          <p class="category"><a href="index.html%3Fcategory=33.html" title="more from Systems...">Systems</a></p>
          <hr><a id="comments"></a><script>
						var idcomments_acct = 'b941b488f39712a0d6409992a0d7fc47';
						var idcomments_post_id;
						var idcomments_post_url;
					</script><span id="IDCommentsPostTitle" style="display:none"></span><script type="text/javascript" src="http://www.intensedebate.com/js/genericCommentWrapperV2.js"></script></div>
        <div> </div>
      </div>
      <div id="sidebar">
        <h4>categories</h4>
        <ul>
          <li><a href="index.html%3Fcategory=33.html">Systems</a></li>
          <li><a href="index.html%3Fcategory=32.html">CA</a></li>
          <li><a href="index.html%3Fcategory=31.html">IoT</a></li>
          <li><a href="index.html%3Fcategory=30.html">ALPS</a></li>
          <li><a href="index.html%3Fcategory=29.html">API</a></li>
          <li>[<a href="../categories/index.html%3Fall.html" title="view all categories">all</a>]</li>
        </ul>
        <h4>websites</h4>
        <ul>
          <li><a href="../websites/32.html">Untangled</a></li>
          <li><a href="../websites/31.html">Anne’s Weblog</a></li>
          <li><a href="../websites/30.html">exyus</a></li>
          <li><a href="../websites/29.html">Random Stuff</a></li>
          <li><a href="../websites/28.html">JScript Blog</a></li>
          <li>[<a href="../websites/index.html%3Fall.html" title="view all websites">all</a>]</li>
        </ul>
        <h4>archives</h4>
        <ul>
          <li><a href="index.html%3Ftoday.html" title="today's posts">today</a></li>
          <li><a href="index.html%3Fyesterday.html" title="yesterday's posts">yesterday</a></li>
          <li><a href="index.html%3Fthisweek.html" title="this weeks's posts">this week</a></li>
          <li><a href="index.html%3Flastweek.html" title="last week's posts">last week</a></li>
          <li><a href="index.html%3Fthismonth.html" title="this month's posts">this month</a></li>
          <li><a href="index.html%3Flastmonth.html" title="last month's posts">last month</a></li>
          <li>
								[<a href="index.html" title="browse the archives">browse</a>]
							</li>
        </ul>
        <div> </div>
        <div><xscript type="text/javascript" src="http://plancast.com/goodies/widgets/sidebar/1/15731">// plancast</xscript></div>
        <div id="twitter_div">
          <h4>my tweets</h4>
          <ul id="twitter_update_list"></ul>
          <div class="twitter-link"><a href="http://twitter.com/mamund" title="follow me on Twitter">
									follow me
								</a></div>
          <hr class="empty">
        </div>
      </div>
      <div id="ads" style="text-align:center;"><script type="text/javascript">
							google_ad_client = "pub-2944238157647009";
							google_ad_width = 728;
							google_ad_height = 90;
							google_ad_format = "728x90_as";
							google_ad_type = "text";
							//2007-08-10: amundsen.com
							google_ad_channel = "2960096544";
							google_color_border = "000000";
							google_color_bg = "F0F0F0";
							google_color_link = "000000";
							google_color_text = "000000";
							google_color_url = "000000";
						</script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>
      <div id="footer">
        <p>Copyright © 2007-2010 amundsen.com, inc. All rights reserved.</p>
      </div>
    </div><script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script><script type="text/javascript" src="http://twitter.com/statuses/user_timeline/mamund.json?callback=twitterCallback2&amp;count=5"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
					_uacct = "UA-2399548-1";
					urchinTracker();
				</script></body>
</html>