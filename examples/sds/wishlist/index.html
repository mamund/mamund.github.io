<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>SDS Feature Wish List</title>
    <link rel="search" 
      type="application/opensearchdescription+xml" 
      title="MikeAmundsen and friends" 
      href="http://wego-wego.appspot.com/friendfeed/mamund/osd/" />
    <style type="text/css">
        h1,h2,h3,h4,h5,p,div,dl
        {
            margin:0 0 0 0;
            padding:0;
        }
        p.version
        {
            font-style:italic;
            font-size:small;
        }
        div#page-content
        {
            width:1100px;
            margin:auto;
        }
        div#details
        {
            margin:1em 0;
        }
        div.section p
        {
            margin:.5em 0;
        }
        dt
        {
            font-weight:bold;
        }
        dt span.date
        {
            font-weight:normal;
            font-style:italic;
            font-size:small;
        }
        dd
        {
            margin-bottom: .5em;
        }
        a.rfc,a.rfc:visited,a.rfc:link,a.rfc:hover
        {
            color:#900;
            font-weight:normal;
        }
        code
        {
            font-weight:bold;
        }
        .reduce-charges
        {
            color:green;
            font-style:italic;
        }
        a,a:visited,a:hover,a:link
        {
            color:blue;
        }
        .section p.first
        {
            margin-top:0;
        }
        p.note
        {
            font-style:italic;
        }
        a.indoc,a.indoc:hover,a.indoc:visited,a.indoc:link
        {
            color:#000;
        }
        .progress
        {
            color:#000;
            font-weight:normal;
            background-color:#ccc;
            border:1px solid black;
            padding:.3em;
        }
        span.headline
        {
        		display:block;
        		font-weight:bold;
        		margin:0;
        }
        .hidden
        {
            display:none;
        }
        .alert
        {
            border:1px solid red;
            padding: .2em;
            background-color:#ffc;
        }
        .alert h3,h4,p
        {
            margin:0;
        }
    </style>
</head>
<body>
    <div id="page-content">
        <div id="ads" style="text-align:center;">
            <script type="text/javascript">
                <!--
                google_ad_client = "pub-2944238157647009";
                google_ad_width = 728;
                google_ad_height = 90;
                google_ad_format = "728x90_as";
                google_ad_type = "text_image";
                //2007-08-10: hikeweb
                google_ad_channel = "4794860677";
                google_color_border = "000000";
                google_color_bg = "F0F0F0";
                google_color_link = "000000";
                google_color_text = "000000";
                google_color_url = "000000";
                //-->
            </script>
            <script type="text/javascript"
              src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>
        <div id="details">
          <h1 id="home" title="Home">SDS Feature Wish List</h1>
          <p class="version">updated: 2009-02-01 (v1.2)</p>
          <p>by <a href="../../../blog/index.html" title="Mike Amundsen">Mike Amundsen</a></p>
          <!--
          <p><a href="http://amundsen.com/examples/sds/">SDS Examples Home</a></p>
          <p><a href="http://amundsen.com/examples/sds/feedback/">Feedback for SDS Examples</a></p>
          -->
        </div>
	    <div id="links">
		    <ul>
			    <li><a href="../../../ssds/index.html">SDS Examples Home</a></li>
			    <li><a href="../../ssds/wishlist/index.html">SDS Feature Wish List</a>&nbsp;<span class="color:green;">[new]</span></li>
			    <li><a href="http://amundsen.com/examples/sds-photos/">SDS Photo Demo</a></li>
			    <li><a href="../../ssds/sds-client/index.html">SDS Provisioning Client</a></li>
			    <li><a href="../../ssds/guestbook-client/index.html">SDS Guestbook Client</a></li>
			    <!--<li><a href="/examples/sds/data-client/">SDS Provisioning Client</a>&nbsp;[deprecated]</li>-->
			    <li><a href="../../ssds/feedback/index.html">Feedback for SDS Examples</a></li>
			    <li><a href="../task-web-client/index.html">Tasklist Web Client</a></li>
			    <li><a href="http://amundsen.com/sds/tasks/">Tasklist XML (SDS proxy)</a></li>
			    <li><a href="http://code.google.com/p/mikeamundsen/downloads/list" title="Download the Code">Download the code</a></li>
		    </ul>
		</div>
		<div class="alert hidden">
		    <h4>NOTE</h4>
		    <p>
		        On 2008-12-16, this server will undergo extensive maintenance including relocation. The site may be down
		        for 24 hrs or more. Sorry for the nconvenience. I'll have the server back up as quickly as possible. 
		    </p>
		</div>
        <div class="section">
            <p>
                This page contains features and other 'wish list' items I've collected while working with Microsoft's
                <a href="http://www.microsoft.com/azure/data.mspx" title="SQL Data Services.">SDS</a>. You might notice that most of the requests
                I list here relate to 'application protocol' level items - HTTP. That's because I am currently most
                interested in these issues and I have not found too many others covering the same space.
                I know there are lots of important database-related features that SDS can include, too. I leave
                the work of documenting those feature requests to others.
            </p>
            <p>
                The SDS team maintains an <a href="http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/threads/" title="SQL Data Services (SDS) - Getting Started">
                active forum</a> for anyone who wishes to join. They also have an <a href="http://blogs.msdn.com/ssds/" title="SQL Data Services Team Blog">
                SDS Team blog</a>. You'll find lots of the items on this page covered in these other sources. However,
                I had a hard time keeping track of progress on several of these items. So I started this page to try to
                keep a easy-to-find linkable list of items related to SDS.
            </p>
            <p>
                Of course, this list is in no way official or comprehensive. It's not meant to be a 'sink' for SDS feature requests.
                If you like some of the stuff here - cool. If you think some of it is just lame, I accept that. If you think
                I've missed some important items, you're not be alone. I encourage you to publish your own feature lists for SDS to consider.
                Feel free to post your comments on my
                <a href="../../ssds/feedback/index.html" title="Feedback for SDS Examples">SDS Feedback</a> page.
            </p>
        </div>
        <div class="section">
            <h2>Wish List</h2>
            <dl>
            	  <dt><a name="permission-access" class="indoc">Support Permission-style Access Security based on HTTP Method + URI</a> <span class="date">2008-12-05</a></dt>
            	  <dd>
            	  	<p class="first">
            	  		Currently SDS a single user account that has full access to all operations (Create, Read, Update, Delete) for all SDS objects
            	  		(Authorities[no delete], Containers, Entities). SDS should also provide support for multiple user accounts with
            	  		granular access to the same SDS objects. In keeping with SDS's support for REST-like interaction, it is proposed
            	  		that access security for SDS be based on <em>permissions</em> (and not <em>roles</em>) and that the permissions
            	  		be mapped directly to HTTP methods: <code>POST</code>(<em>Create</em>), <code>GET</code>(<em>Read</em>),
            	  		<code>PUT</code>(<em>Update</em>), and <code>DELETE</code>(<em>Delete</em>).
            	  	</p>
            	  	<p>
            	  		Further, it is proposed that these permissions be applied directly to the URIs that are used to request
            	  		SDS objects. For example <code>http://data.database.windows.net</code> [<em>POST, GET</em>] is
            	  		a security rule that allows only Read and Create rights for, in this case Authorities. This pattern
            	  		can be expanded by using a templating notation (i.e. regular expressions). For example, the following
            	  		rule defines read-only access for the selected authority/container: 
            	  		<code>http://my-authority.data.database.windows.net/my-container/(.*) [<em>GET</em>]</code>.
            	  	</p>
            	  	<p>
            	  		Finally, these security access rules (<code>URI+HTTP-Method-list</code>) can be associated with one or
            	  		more user accounts to complete the access control features of SDS. Also, it is possible to associate
            	  		one or more security access rules with a role|group and then associate one or more user accounts with
            	  		that group. In this way, SDS can implement support for 'role-based' security.
            	  	</p>
            	  	<p class="note">
            	  		<span class="headline">NOTE</span> It is not recommended that access security be based on values that do not appear in the URI (i.e. cookies, 
            	  		custom headers, etc.) since this can break intermediaries (caching, security proxies, etc.) and could 
            	  		result in the exact same URI returning different data to the user-agent based on the contents of these
            	  		'hidden' values. For the same reasons, it is not recommended that access security be based on the contents of
            	  		Entity objects (i.e. <em>Kind</em>) since this is data 'hidden' in the body of the response and not 
            	  		available via the URI itself.
            	  </dd>
            		<dt><a name="digest-auth" class="indoc">Provide Support for HTTP Digest Authentication</a> <span class="date">2008-12-05</span></dt>
            		<dd>
            			<p class="first">
            				Currently SDS supports the Basic form of 
            				<a href="http://www.ietf.org/rfc/rfc2617.txt" class="rfc" title="rfc2617">HTTP Authentication</a>. In addition, SDS should offer user-agents the option
            				of using the Digest form. Both forms are essential for supporting automated user-agent interaction with the 
            				SDS data servers and the Digest authentication algorithm is more secure than the Basic algorithm.
            			</p>
            		</dd>
                <dt><a name="paging-headers" class="indoc">Provide Support for Paging Indicators as Custom HTTP Headers</a> <span class="date">(2008-12-02)</span></dt>
                <dd>
                    <p class="first">
                    Currently SDS returns a maximum of 500 entities per query regardless of the number of entities that match the query criteria.
                    Going forward it is important to provide support for paging control. Ideally this should be done as message metadata, not as
                    part of the query itself. One possible exception would be to use the <code>Take(<em>n</em>)</code> query function currently supported
                    by SDS as part of the paging control metadata. A good example of a pattern already 'vetted' by the community is the
                    <a href="http://tools.ietf.org/rfc/rfc5005.txt"class="rfc" title="rfc5005">Feed Paging and Archiving</a> standard developed for the
                    <a href="http://www.rfc-editor.org/rfc/rfc4287.txt" class="rfc" title="rfc4287">Atom</a> MIME-type.
                    Since SDS seems committed to supporting Atom at some point in the future, using the above-mentioned RFC standard seems a good target.
                    </p>
                    <p>
                    For MIME-types other than Atom, it is suggested that a set of custom HTTP Headers be employed to cover the same values.
                    Suggested names are: <code>x-paging-first, x-paging-previous, x-paging-next, x-paging-last</code>. In line with
                    RFC5005 (see above), the values should be links, not scalar values. This allows the greatest flexibility for future changes to the
                    way paging is used and/or computed (i.e. <code>x-paging-next: http://example.com/container/entity-25</code>)
                    </p>
                    <p>
                    Another possible solution would be to consider the
                    <a href="http://www.mnot.net/drafts/draft-nottingham-http-link-header-00.txt" class="rfc" title="draft-nottingham-http-link-header-00">HTTP Header Linking</a>
                    draft from Mark Nottingham (i.e. <code>link:&lt;http://example.com/container/&gt;; rel="first")</code>.
                    While this draft is currently dormant, it has potential for wider acceptance over adopting custom HTTP headers.
                    </p>
                </dd>
                <dt><a name="cache-control" class="indoc">Support Cache-Control:no-cache and/or Pragma:no-cache HTTP Header</a> <span class="date">(2008-11-30)</span></dt>
                <dd>
                    SDS should support the use of
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9" class="rfc" title="rfc2616">Cache-Control:no-cache</a> (HTTP/1.1) and/or
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32" class="rfc" title="rfc2616">Pragma:no-cache</a> (HTTP/1.0).
                    This allows the user agent to indicate to the server that a fresh copy of the resource should be sent
                    regardless of the expiration or validation caching in force. Specifically, in cases where user agents send
                    SDS the Cache-control:no-cache or Pragma:no-cache headers, any If-None-Match header should be ignored.
                    This allows user agents to explicitly request a fresh copy of the resource and update any intermediary caches
                    in the path between the user agent and the server.
                </dd>
                <dt><a name="schema" class="indoc">Publish the Schema referenced in SDS EntitySet and Entity documents</a> <span class="date">(2008-11-30)</span></dt>
                <dd>
                    Currently, SDS responses (EntitySet and Entity documents) contain several references to custom schema
                    (<a href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>,
                    <a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>, and
                    <a href="http://schemas.microsoft.com/sitka/2008/03/">http://schemas.microsoft.com/sitka/2008/03/</a>
                    ). The "sitka" schema link currently returns 404. It would be better if this link pointed to the actual
                    "sitka" schema defintion used by SDS. This could be either a simple XSD/DTD document or, like many references
                    (see the "XMLSchema" example), an HTML document that includes details on how to find the most current implementation
                    of the schema in question.
                </dd>
                <dt><a name="register-mime-type" class="indoc">Register the SDS custom MIME-Type w/ IANA</a> <span class="date">(2008-11-30)</span></dt>
                <dd>
                    It's good that SDS uses a custom MIME-type (<code>application/x-ssds+xml</code>) to identify EntitySet and Entity documents.
                    It would be better if this custom MIME-type was
                    <a href="ftp://ftp.rfc-editor.org/in-notes/rfc4288.txt" class="rfc" title="rfc4288">properly</a>
                    <a href="ftp://ftp.rfc-editor.org/in-notes/rfc3023.txt" class="rfc" title="rfc3023">registered</a> with the
                    <a href="http://www.iana.org/assignments/media-types/" class="rfc" title="Internet Assigned Numbers Authority">IANA</a>.
                    This would make it easier for others to find and build in support for the custom MIME-type.
                </dd>
                <dt><a name="last-modified" class="indoc">Support Last-Modified. If-Modified-Since, and If-Unmodified-Since Headers</a> <span class="date">(2008-11-29)</span></dt>
                <dd>
                    Currently, SDS supports conditional GET and conditional PUT via the
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19" class="rfc" title="rfc2616">ETag</a>,
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26" class="rfc" title="rfc2616">If-None-Match</a> (for conditional GET), and
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24" class="rfc" title="rfc2616">If-Match</a> (for conditional PUT).
                    In addition to ETags, SDS should also support
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29" class="rfc" title="rfc2616">Last-Modified</a>,
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25" class="rfc" title="rfc2616">If-Modified-Since</a> (for conditional GET), and
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.28" class="rfc" title="rfc2616">If-Unmodified-Since</a> (for conditional PUT).
                    Adding support for these HTTP Headers will allow clients to use the *-Modified Headers instead of ETag headers.
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
                </dd>
                <dt><a name="multiple-media-types" class="indoc">Support multiple media-types for the same Entity</a> <span class="date">(2008-11-29)</span></dt>
                <dd>
                    Currently, with the exception of BLOB support, SDS only supports POX (plain old XML) responses
                    when requesting Authority, Container, and Entity objects. That means clients that wish to consume other
                    MIME-types (Atom, JSON, etc.) must rely on a 'transformation proxy' to convert the data
                    to the desired format. SDS should support 
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec12.html#sec12.1" class="rfc" title="rfc2616">server-driven content negotation</a>
                    using standard MIME-types via the
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1" class="rfc" title="rfc2616">Accept</a>
                    and <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17" class="rfc" title="rfc2616">Content-Type</a>
                    HTTP headers. That means the URI for the resource (<code>/container/entity-id</code>) <em>should not</em>
                    change depending on the MIME-type (i.e. <code>/atom/container/entity-id</code> is not allowed). Text-based
                    media types that are desirable include
                    <a href="http://www.rfc-editor.org/rfc/rfc4287.txt" class="rfc" title="rfc4287">Atom</a>,
                    <a href="http://www.ietf.org/rfc/rfc4627.txt" class="rfc" title="rfc4627">JSON</a>,
                    <a href="http://www.rfc-editor.org/rfc/rfc2854.txt" class="rfc" title="rfc2854">HTML</a>, and
                    <a href="http://www.rfc-editor.org/rfc/rfc4180.txt" class="rfc" title="rfc4180">CSV</a>.
                    Additional types that would improve the user-agent experience include
                    <a href="http://www.rfc-editor.org/rfc/rfc3778.txt" class="rfc" title="rfc3778">PDF</a> and
                    <a href="http://www.w3.org/TR/2005/WD-SVGMobile12-20050413/mimereg.html#mime-registration" class="rfc" title="WD-SVGMobile12-20050413">SVG</a>. 
                </dd>
                <dt><a name="content-md5" class="indoc">Support Content-MD5 Header</a> <span class="date">(2008-11-29)</span><dt>
                <dd>
                    Supporting the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.15" class="rfc" title="rfc2616">Content-MD5</a>
                    header allows the user-agent to send an <a href="http://www.ietf.org/rfc/rfc1321.txt" class="rfc" title="rfc1321">MD5</a> hash of
                    the entity body with the POST/PUT request. The server can then (optionally) perform an MD5 hash and compare the results with the
                    hash supplied by the user-agent. If they do not match, the server can reject the request and send an error response code. This is
                    especially helpful for large and/or binary entity bodies sent from user-agents.
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
                </dd>
                <dt><a name="http-head" class="indoc">Support HTTP HEAD method</a> <span class="date">(2008-11-29)</span></dt>
                <dd>
                	  <p class="first progress">
                	  	<span class="headline">2008-12-03</span>
                	  	The SDS team confirmed that, as of the Public CTP release (2008-11), SDS supports the HEAD method for
                	  	all requests for 'single' objects (i.e. <code>/v1/[container]</code>) but not requests for 'lists' of objects
                	  	(i.e. <code>/v1/[container]?=</code>). I'm still holding out for HEAD support for lists, too.
                	  </p>
                	  <p>	
                    Using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4" class="rfc" title="rfc2616">HEAD</a>
                    method will allow user-agents to check for the existence of a resource (Entity) before making the actual request.
                    This call can also be used to cut down on traffic and bandwidth since making a HEAD call w/ the server-supplied
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19" class="rfc" title="rfc2616">ETag</a>
                    will allow the user-agent to determine if a new copy of the Entity exists on the server. This can improve scalability
                    and runtime performance.
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
                  </p>
                </dd>
                <dt><a name="location-header" class="indoc">Return Location Header for POST, PUT, DELETE</a> <span class="date">(2008-11-25)</span></dt>
                <dd>
                    When doing as POST, PUT or DELETE return the
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30" class="rfc" title="rfc2616">Location</a>
                    HTTP Header that that points to the updated resource (for POST and PUT) or the resource list (for DELETE).
                    This value allows user-agents to perform a GET using the value in the Location header in order to be sure to get the most
                    recent version of the resource. This is especially important when returning HTTP Status Code
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2" class="rfc" title="rfc2616">201</a>
                    (for POST) or <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5" class="rfc" title="rfc2616">204</a>
                    (for DELETE) [see below]. This can improve performance and scalability by lowering traffic between user-agent and server.
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
    
                </dd>
                <dt><a name="no-body" class="indoc">Do not return a body on POST or PUT responses</a> <span class="date">(2008-11-25)</span></dt>
                <dd>
                	<p class="first progress">
                		<span class="headline">2008-12-05</span>
                		I confirmed that the entity body is not returned by SDS on POST or PUT. This request should not have
                		been included in the list. The only remaining item is the need to return the Location header (see above).
                	</p>
                	<p>	
                    Instead of returning the resulting Entity from a POST or PUT, return the appropriate HTTP Status Code
                    with a <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30" class="rfc" title="rfc2616">Location</a>
                    HTTP Header that points to the resulting Entity. For POST, return
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2" class="rfc" title="rfc2616">201</a> (Created).
                    For PUT, return <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5" class="rfc" title="rfc2616">204</a>
                    (No Content). This is especially helpful when handling large binary objects as it
                    cuts down on possibly needless traffic and bandwidth. 
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
                  </p>
                </dd>
                <dt><a name="etag-for-lists" class="indoc">Return ETags and support HTTP Status code 304 for Entity Lists/Queries</a> <span class="date">(2008-11-25)</span></dt>
                <dd>
                    Currently SDS returns an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19" class="rfc" title="rfc2616">ETag</a>
                    for GETs on a single Entity, but not on GETs that return more than oneEntity. This means that user-agents cannot easily
                    cache query results (or even simple, non-filtered lists). It also means that when a user-agent repeats the same GET
                    for a list, it has no ETag to return which means SDS cannot return a
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5" class="rfc" title="rfc2616">304</a> (Not Modified).
                    This increases traffic and bandwidth to SDS servers. 
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>
                </dd>
                <dt><a name="encoding" class="indoc">Support Accept-Encoding and Content-Encoding Headers</a> <span class="date">(2008-11-25)</span></dt>
                <dd>
                    SDS should support <a href="http://www.ietf.org/rfc/rfc1952.txt" class="rfc" title="rfc1952">GZip</a> and
                    <a href="http://www.ietf.org/rfc/rfc1951.txt" class="rfc" title="rfc1951">Deflate</a> encoding when generating responses.
                    When user agents send the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3" class="rfc" title="rfc2616">Accept-Encoding</a>
                    HTTP header, SDS servers should evaulate the header and, when appropriate, encode the results and return the
                    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11" class="rfc" title="rfc2616">Content-Encoding</a>
                    HTTP Header as part of the response. Encoding reduces bandwidth for both server and user-agent.
                    All major browsers and most HTTP libraries automatically support GZip and Deflate.
                    This can result in better response times from the server.
                    <span class="reduce-charges">Supporting this feature can reduce charges to the SDS account-holder.</span>                
                </dd>
            </dl>
        </div>
    </div>
</body>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script> 
<script type="text/javascript"> 
		_uacct = "UA-2399548-1";
		urchinTracker();
</script> 
</html>
